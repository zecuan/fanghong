<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover" />
  <title>本页面由泽川提供</title>
  <style>
    /* 核心：确保整个视口被占满，不卡 top 区域 */
    html, body {
      height: 100%;
      width: 100%;
      margin: 0;
      padding: 0;
      background: #000;
      overflow: hidden;
    }

    /* app 固定覆盖整个视口，避免页面滚动造成露白 */
    #app {
      position: fixed;
      inset: 0; /* top:0; right:0; bottom:0; left:0; */
      width: 100%;
      height: 100%;
      display: block;
      background: #000;
    }

    /* iframe 覆盖容器全部区域 */
    #app iframe {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      border: 0;
      margin: 0;
      padding: 0;
      display: block;
      background: #000;
    }

    /* 到期画面（居中显示） */
    .expired {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      background: #000;
      font-family: system-ui, -apple-system, "PingFang SC", "Microsoft Yahei", Helvetica, Arial, sans-serif;
      font-size: 18px;
      line-height: 1.3;
      text-align: center;
      padding: 16px;
    }

    /* 隐藏所有默认滚动条 /选择 */
    ::-webkit-scrollbar { width: 0; height: 0; }
  </style>
</head>
<body>
  <div id="app" aria-hidden="true"></div>

<script>
(function () {
  'use strict';

  // ---------- 到期时间（北京时间，注意：使用北京时间 = UTC+8） ----------
  // 到期：2025-12-10 00:00:00 北京时间（UTC+8）
  const EXPIRY_ISO_BEIJING = '2025-12-10T00:00:00+08:00';
  const expiryTs = Date.parse(EXPIRY_ISO_BEIJING); // 毫秒时间戳

  // 计算当前北京时间（从系统时间转换为 UTC，再加 8 小时）
  function nowBeijingMs() {
    // Date.now() 是本地时钟对应的 UTC 毫秒偏移（基于系统时间）
    // new Date().getTimezoneOffset() 返回本地时区相对 UTC 的分钟差（例如 CST+8 -> -480）
    const localNow = Date.now();
    const localOffsetMin = new Date().getTimezoneOffset(); // 分钟，注意符号
    const utcMs = localNow + localOffsetMin * 60 * 1000;
    const beijingMs = utcMs + 8 * 60 * 60 * 1000;
    return beijingMs;
  }

  // 立刻检查是否过期
  if (nowBeijingMs() >= expiryTs) {
    showExpired();
    return;
  }

  // 读取 url 参数（不显示任何提示）
  const params = new URLSearchParams(location.search);
  const raw = params.get('url') || params.get('u');

  // 简单校验：必须以 http(s):// 开头（但最终不显示任何错误文字）
  const allowed = typeof raw === 'string' && /^https?:\/\//i.test(raw);
  if (!allowed) {
    // 不显示提示，直接保持黑屏（或你想要可以显示过期/无效）
    // 以下行为：不插入 iframe，保持空白视口
    return;
  }

  // 插入 iframe（自动加载目标站点），不显示任何附加 UI 或文字
  const app = document.getElementById('app');
  const frame = document.createElement('iframe');

  // 你目前要求“只显示目标网站、无任何提示”，因此：
  // - 不插入任何文字或按钮
  // - 使用 minimal sandbox 但允许脚本和同源（对于大多数正常站点）
  // 如果你希望更严格或更宽松，可调整 sandbox 属性
  frame.sandbox = 'allow-same-origin allow-scripts allow-forms allow-popups';
  frame.referrerPolicy = 'no-referrer';
  frame.src = raw;
  frame.setAttribute('aria-hidden', 'true');

  // 直接放入 DOM 并占满
  app.appendChild(frame);

  // 周期性检查（精确到秒），一旦到期立即替换为过期画面
  const checker = setInterval(function () {
    if (nowBeijingMs() >= expiryTs) {
      clearInterval(checker);
      // 移除 iframe 并展示过期提示（如果你希望完全黑屏，也可以直接清空 app）
      app.innerHTML = '';
      showExpired();
    }
  }, 1000);

  // 显示过期画面（当前实现为居中白字黑底）
  function showExpired() {
    const app = document.getElementById('app');
    app.innerHTML = '';
    const div = document.createElement('div');
    div.className = 'expired';
    div.textContent = '该页面已过期';
    app.appendChild(div);
  }

})();
</script>
</body>
</html>
